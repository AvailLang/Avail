System Module "Twenty Questions Unit Test"
Uses
    "Avail",
    "Twenty Questions"
Names
Body

_testSuite ::= $"Twenty Questions test suite";

Private method "Twenty Questions test suite" is [_testSuite];

Twenty Questions test suite is a new test suite;

Test "correct first guess" in Twenty Questions test suite is
[
    output : string;
    Play Twenty Questions with input ["y"] and output [o : string | output := o;];
    Require: output = "Yay!\n";
];

Test "incorrect first guess" in Twenty Questions test suite is
[
    input : <string…|> := <"n", "teh", "Is it a common misspelling of the?">;
    output : <string…|> := <"Is it Avail? ", "I give up. What was it? ",
    	"Okay. What is a question to distinguish it from Avail? ">;
    inputIndex : natural number := 1;
    outputIndex : natural number := 1;
    Play Twenty Questions with input [input[(↑inputIndex++)]] and output [o : string | Require: output[(↑outputIndex++)] = o;];
    Require: 0 = 0;
];

Print: test suite-oriented “report on all tests in Twenty Questions test suite”;