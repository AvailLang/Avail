<idea-plugin>
    <id>avail.plugin.avail-intellij-plugin</id>
    <name>Avail</name>
    <vendor email="avail@availlang.org" url="http://www.availlang.org">
        Avail</vendor>

    <description><![CDATA[The IntelliJ plugin for supporting
    the Avail language.]]></description>

    <!-- please see https://plugins.jetbrains.com/docs/intellij/plugin-compatibility.html
         on how to target different products -->
    <depends>com.intellij.modules.platform</depends>

    <extensions defaultExtensionNs="com.intellij">
        <fileType
            name="Avail File"
            implementationClass="org.availlang.ide.anvil.language.file.AvailFileType"
            fieldName="INSTANCE" language="Avail" extensions="avail"/>
        <lang.parserDefinition
            language="Avail"
            implementationClass="org.availlang.ide.anvil.language.AvailParserDefinition"/>
        <lang.psiStructureViewFactory
            language="Avail"
            implementationClass="org.availlang.ide.anvil.language.AvailStructureViewFactory"/>
<!--        <fileEditorProvider-->
<!--            implementation="org.availlang.ide.anvil.editor.AvailModuleFileEditorProvider"/>-->
        <lang.fileViewProviderFactory
            implementationClass="org.availlang.ide.anvil.language.psi.AvailFileViewProviderFactory"/>
        <moduleBuilder
            builderClass="org.availlang.ide.anvil.module.AvailModuleTypeBuilder"/>
        <moduleType id="AVAIL_MODULE"
            implementationClass="org.availlang.ide.anvil.module.AvailModuleType"/>
    </extensions>
    <applicationListeners>
        <listener
            class="org.availlang.ide.anvil.listeners.AvailProjectOpenListener"
            topic="com.intellij.openapi.project.ProjectManagerListener"/>
    </applicationListeners>
    <actions>
        <!-- Add your actions here -->
<!--        <group id="org.intellij.sdk.action.GroupedActions"-->
<!--               text="Avail"-->
<!--               description="Avail actions"-->
<!--               popup="true">-->
<!--            <add-to-group-->
<!--                group-id="ToolsMenu"-->
<!--                anchor="last"/>-->
<!--            <action-->
<!--                id="org.availlang.ide.anvil.actions.ReportProblemsAction"-->
<!--                class="org.availlang.ide.anvil.actions.ReportProblemsAction"-->
<!--                text="Report Avail Project Problems"-->
<!--                description="Reports avail project problems">-->
<!--            </action>-->
<!--        </group>-->
<!--        <group id="org.availlang.ide.anvil.actions.AvailActionGroup"-->
<!--               class="org.availlang.ide.anvil.actions.AvailActionGroup"-->
<!--               text="Avail"-->
<!--               description="Avail actions">-->
<!--            <add-to-group-->
<!--                group-id="ToolsMenu"-->
<!--                anchor="after"-->
<!--                relative-to-action="JShell.Console"/>-->
<!--&lt;!&ndash;            <action&ndash;&gt;-->
<!--&lt;!&ndash;                id="org.availlang.ide.anvil.actions.ReportProblemsAction"&ndash;&gt;-->
<!--&lt;!&ndash;                class="org.availlang.ide.anvil.actions.ReportProblemsAction"&ndash;&gt;-->
<!--&lt;!&ndash;                text="Report Avail Project Problems"&ndash;&gt;-->
<!--&lt;!&ndash;                description="Reports avail project problems">&ndash;&gt;-->
<!--&lt;!&ndash;            </action>&ndash;&gt;-->
<!--        </group>-->

<!--        <action id="org.availlang.ide.anvil.actions.ReportProblemsAction"-->
<!--                class="org.availlang.ide.anvil.actions.ReportProblemsAction"-->
<!--                text="Avvv"-->
<!--                description="AAAA">-->
<!--            <add-to-group group-id="ToolsMenu"-->
<!--                          anchor="after"-->
<!--                          relative-to-action="JShell.Console"/>-->
<!--        </action>-->
        <group id="org.availlang.ide.anvil.actions.AvailActionGroup"
               class="org.availlang.ide.anvil.actions.AvailActionGroup"
               text="Avail"
               description="Avail actions."
               popup="true"
               icon="/icons/AvailHammer-small.png">
            <add-to-group group-id="ToolsMenu" anchor="last"/>
        </group>
<!--		<action id="org.availlang.ide.anvil.actions.BuildAction"-->
<!--				class="org.availlang.ide.anvil.actions.BuildAction"-->
<!--				text="Build"-->
<!--				description="Build Avail file.">-->
<!--			<add-to-group group-id="EditorPopupMenu" anchor="last"/>-->
<!--		</action>-->
		<action id="org.availlang.ide.anvil.actions.BuildAction"
				class="org.availlang.ide.anvil.actions.BuildAction"
				text="Build"
				description="Build this Avail file.">
			<add-to-group group-id="EditorPopupMenu" anchor="first"/>
			<keyboard-shortcut keymap="$default"
							   first-keystroke="shift meta B"/>
		</action>
	</actions>
</idea-plugin>
